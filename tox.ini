[tox]
envlist = {py3,pypy3}-{lint,test,docs}
skip_missing_interpreters=False

[testenv]
setenv =
    PROJECT_PATH=friendlypins

usedevelop=True
envdir =
    py3: {toxworkdir}/py3
    pypy3: {toxworkdir}/pypy3

deps =
    py3: -rtests/python3.reqs
    pypy3: -rtests/pypy3.reqs

commands =
    py3-lint: python -m pylint setup.py
    py3-lint: python -m pylint ./src/{env:PROJECT_PATH}
    test: python -m pytest {posargs} ./tests -v --cov-report html --cov {env:PROJECT_PATH} --no-cov-on-fail
    py3-docs: python setup.py build_sphinx